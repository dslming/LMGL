<!DOCTYPE html>
<head>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div class="content">
    <canvas id="c"></canvas>
  </div>
  <script type="module">
    // https://math.hws.edu/graphicsbook/source/webgl/cube-camera.html
    import * as lmgl from '../src/lmgl.js'
    // import SkyBox from './meshLib/SkyBox.js'
    // import Plane from './meshLib/Plane.js'

    window.lmgl = lmgl;

  let stage

  window.onload = () => {
    document.title = "天空盒"
    let width = window.innerWidth
    let height = window.innerHeight

    window.addEventListener("resize", ()=>{
      width = window.innerWidth
      height = window.innerHeight
    })

    stage = new lmgl.Stage()
    stage.init(document.querySelector("#c"), width, height)
    stage.camera.position.set(0, 0, 10)

    const skyBox = new lmgl.SkyBox(()=>{
      stage.add(skyBox.mesh)
    });


    const model = lmgl.geometryLib.plane();
    const geo = {
      indices: model.indices,
      attribute: {
        aPosition: {
            value: model.position,
            itemSize: 3
          },
      }
    };
    const mat = new lmgl.Material(lmgl.shaderLib.lambert(),{
      uniforms: {
        diffuseColor: {value: {x:1,y:0,z:0}, type:"v3"},
      }
    });
    let plane = new lmgl.Mesh(geo, mat);
    stage.add(plane);
    stage.addUpdate("loop",()=>{
      // skyBox.mesh && (skyBox.mesh.rotation.y += 0.001);
      // plane.rotation.y += 0.01;
    })
    stage.run()
  }

  </script>
</body>
</html>
